This file is sleep.def, from which is created sleep.c.
It implements the builtin "sleep" in Bash.

Copyright (C) 1987-2018 Free Software Foundation, Inc.

This file is part of GNU Bash, the Bourne Again SHell.

Bash is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Bash is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Bash.  If not, see <http://www.gnu.org/licenses/>.

$PRODUCES sleep.c

$BUILTIN sleep
$FUNCTION sleep_builtin
$SHORT_DOC sleep seconds[.fraction]
Suspend execution for approximately SECONDS[.FRACTION] seconds.

This builtin is disabled by default.  Enable it with `enable sleep'.

Exit Status:
Returns success unless aborted.
$END

#include <config.h>

#if defined (HAVE_UNISTD_H)
#  ifdef _MINIX
#    include <sys/types.h>
#  endif
#  include <unistd.h>
#endif

#include "../bashansi.h"
#include "../bashintl.h"
#include "../shell.h"
#include "common.h"

int
sleep_builtin (list)
     WORD_LIST *list;
{
  long sec, usec;

  if (list && list->word && ISOPTION (list->word->word, '-'))
    list = list->next;

  if (!list)
    {
      builtin_usage ();
      return (EX_USAGE);
    }

  if (uconvert (list->word->word, &sec, &usec))
    {
      fsleep (sec, usec);
      return (EXECUTION_SUCCESS);
    }

  builtin_error ("%s: bad sleep interval", list->word->word);
  return (EXECUTION_FAILURE);
}
